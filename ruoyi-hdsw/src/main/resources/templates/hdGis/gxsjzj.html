<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="zh">
<head>
    <meta charset="utf-8">
    <title>地图</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script th:src="@{/openlayersv6.5/build/ol.js}"></script>
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bd09.js}"></script>
    <script th:src="@{/js/baiduMercator.js}"></script>
    <script th:src="@{/js/olMapConfig.js}"></script>
    <script th:src="@{/js/map.js}"></script>
    <script th:src="@{/js/coordinateTransform.js}"></script>
    <script th:src="@{/zTree/jquery.ztree.core.js}"></script>
    <script th:src="@{/zTree/jquery.ztree.excheck.js}"></script>
    <script th:src="@{/zTree/jquery.ztree.exhide.js}"></script>
    <script th:src="@{static/ajax/libs/layui/layui.min.js}"></script>
    <script src="static/ajax/libs/layui/modules/laydate.js"></script>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>

    <link th:href="@{/zTree/zTreeStyle.css}" rel="stylesheet"/>
    <link href="//unpkg.com/layui@2.6.13/dist/css/layui.css" rel="stylesheet"/>
    <link th:href="@{/openlayersv6.5/css/ol.css}" rel="stylesheet"/>
    <link th:href="@{/css/map.css}" rel="stylesheet"/>
    <style>
        .ztree li a span.button {
            background-size: 16px 16px !important;
        }

        .layui-ihh {
            background: rgba(7, 21, 30, 0.9);
            /*box-shadow: 2px 2px 9px 1px #03FFEA;*/
            border-radius: 5px;
            border: 1px solid #03FFEA;
        }

        .cd {
            font-size: 14px !important;
            font-family: MicrosoftYaHei;
            color: #03FFEA !important;
        }
        .content-tab{
            position: absolute;
            z-index: 9999;
            left: 1%;
            top: 1%;
        }
        .tabNav{
            width: 600px;
            list-style: none;
            display: flex;
            justify-content:space-between;
            padding-inline-start: 0px!important;
        }
        .tabNav li{
            width: 110px;
            text-align: center;
            height: 40px;
            line-height: 36px;
            border: 2px solid #ccc;
            border-radius: 10px;
            background: #fff;
            cursor: pointer;
        }
        .active_nav{
            background: #4A98F7!important;
            color: #fff;
        }
        .sty{
            width: 950px;
            max-height: 700px;
            min-height: 150px;
            border-radius: 10px;
            border: 2px solid #ccc;
            padding: 10px;
            background: #fff;
            margin: 10px 0 0 0;
            overflow: auto;
        }
        .sear_sty{
            width: 100%;
            display: flex;
            justify-content: center;
        }
        .sear_sty input{
            margin: 0 10px 0 10px;
        }
        .sear_sty select{
            margin: 0 10px 0 10px;
        }
        .sear_sty button{
            margin: 0 10px 0 10px;
        }
        .form-control{
            width: 150px!important;
            display: inline-block;
        }
        select{
            width: 150px!important;
        }
        .form-group{
            width: 100%;
            /*justify-content:space-around;*/
            margin: 10px 0 10px 0;
        }
        .form-btn{
            display: flex;
            justify-content: space-around;
        }
        h4{
            margin-block-start: 0!important;
            margin-block-end: 0!important;
            margin: 10px 0 0 0!important;
        }
        .layui-form-label{
            width: 130px;
            display: inline-block;
            text-align: right;
        }
        .layui-form select {
             display: block!important;
        }
        .icon-bar {
            right: 50px!important;
        }
        .layerTreeDiv {
            right: 3%!important;
        }
        .btn-mini{
            line-height: 25px;
            padding: 0!important;
        }
        .hzzb{
            display: none;
        }
    </style>
</head>
<body>
<div id="mapDiv" class="">
    <div class="baseInfo" id="mapBaseInfo"></div>
    <div class="icon-bar">
        <div class="layui-icon layui-icon-template-1 layui-icon-map" id="mapLayers"></div>
    </div>
    <div id="featureInfo" class="featureInfo layui-ihh" style="overflow:auto;border-radius:10px;"></div>

    <div class="content-tab">
      <ul class="tabNav">
          <li class="active_nav">参照加点</li>
          <li>解析加点</li>
          <li>解析加线</li>
          <li>插入点</li>
          <li>连接点</li>
      </ul>
       <div class="nav_content">
           <div class="sty" id="czjd">
               <p class="sear_sty"><input type="text" id="search_content" name="" placeholder="输入名称搜索参照物" autocomplete="off" class="form-control">
                 <button class="btn btn-primary" id="search_btn" onclick="search()">查询</button>
               </p>
               <form class="layui-form" action="">
                   <div class="Mapczw">
                       <div class="form-group">
                   <h4>参照物1:<button type="button" class="btn btn-primary" style="height: 25px;padding: 0!important" id="1" onclick="getCoordinateFlag(this.id)">获取坐标</button>
                       <button type="button" class="btn btn-success" style="height: 25px;padding: 0!important" onclick="computeCoordinate()" >计算</button></h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">横坐标</label>
                           <input type="text" name="title" id="x1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">纵坐标</label>
                           <input type="text" name="title" id="y1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">距离</label>

                           <input type="text" name="title" id="dis1"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control jl">

                       </div>
                     </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">角度</label>
                           <input type="text" name="title" id="brng1"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   </div>

                   <div class="form-btn">
                       <button type="button" id="add_czw" class="btn btn-primary" style="height: 20px;width:30px;padding: 0!important">+</button>
                       <button type="button" id="reduce_czw" class="btn btn-primary" style="height: 20px;width:30px;padding: 0!important">-</button>
                   </div>
                   <h4>管点属性:</h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管点编号</label>
                           <input type="text" name="title" id="gdbh1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">地面高程</label>
                           <input type="text" id="dmgc1" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">特征</label>
                           <input type="text" id="tz1" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">附属物</label>
                           <input type="text" id="fsw1" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井底埋深</label>
                           <input type="text" name="title" id="jdms1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖类型</label>
                           <input type="text" name="title" id="jglx1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖规格</label>
                           <input type="text" name="title" id="jggg1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖材质</label>
                           <input type="text" name="title" id="jgcz1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室材质</label>
                           <input type="text" name="title" id="jscz1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室类型</label>
                           <input type="text" name="title" id="jslx1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井脖深</label>
                           <input type="text" name="title" id="jbs1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室直径</label>
                           <input type="text" name="title" id="jszj1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           <em>米</em>
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">权属单位</label>
                           <input type="text" name="title" id="qsdw1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">建设日期</label>
                           <input type="text" class="layui-input form-control" id="jsrq1">
<!--                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">-->
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">偏心井点号</label>
                           <input type="text" name="title" id="pxjdh1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">旋转角度</label>
                           <input type="text" name="title" id="xzjd1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">所在道路</label>
                           <input type="text" name="title" id="szdl1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">标高</label>
                           <input type="text" name="title" id="bg1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">X坐标</label>
                           <input type="text" name="title" id="xcor1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">Y坐标</label>
                           <input type="text" name="title" id="ycor1" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group form-btn">
                       <button type="button" class="btn btn-primary">确定</button>
                       <button type="button" class="btn btn-primary">取消</button>
                   </div>
               </form>
           </div>

           <div class="sty" style="display: none" id="jxjd">
               <div class="form-check form-check-inline">
                   <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="1" checked>
                   <label class="form-check-label" for="exampleRadios1">
                       解析法
                   </label>
                   <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="2" >
                   <label class="form-check-label" for="exampleRadios2">
                       页面输入法
                   </label>
               </div>


               <div id="jxf">
                   <div class="form-group">
                       <button type="button" class="btn btn-primary btn-sm">下载模板</button>
                   </div>
                   <div class="form-group">
                       <input class="btn btn-primary" type="file">
                   </div>
                   <div class="form-group">
                   <div class="">
                       <label class="layui-form-label">数据文件</label>
                       <input type="text" name="title" required  style="width: 200px" lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                   </div>
                   </div>
                   <div class="form-group" style="text-align: center">
                       <button class="btn btn-primary" type="submit" value="Submit">确定</button>
                       <button class="btn btn-primary" type="reset" value="Reset">取消</button>
                   </div>
               </div>

               <div id="ymsrf" style="display: none">
                   <form class="layui-form" action="">
                       <h4>管点坐标:</h4>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">横坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">纵坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <h4>管点属性:</h4>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">管点编号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">地面高程</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">特征</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">附属物</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井底埋深</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井盖类型</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井盖规格</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井盖材质</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井室材质</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井室类型</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井脖深</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">井室直径</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">权属单位</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">建设日期</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">偏心井点号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">旋转角度</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">所在道路</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">标高</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group" style="text-align: center">
                           <button type="button" class="btn btn-primary">确定</button>
                           <button type="button" class="btn btn-primary">取消</button>
                       </div>
                   </form>
               </div>
           </div>

           <div class="sty" id="jxjx" style="display: none">
               <div class="form-check form-check-inline">
                   <input class="form-check-input" type="radio" name="jxjx"  value="1" checked>
                   <label class="form-check-label" for="exampleRadios1">
                       解析法
                   </label>
                   <input class="form-check-input" type="radio" name="jxjx"  value="2" >
                   <label class="form-check-label" for="exampleRadios2">
                       页面输入法
                   </label>
               </div>


               <div id="jxf_">
                   <div class="form-group">
                       <input class="btn btn-primary" type="file">
                   </div>
                   <div class="form-group">
                       <div class="">
                           <label class="layui-form-label">数据文件</label>
                           <input type="text" name="title" required  style="width: 200px" lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group" style="text-align: center">
                       <button class="btn btn-primary" type="submit" value="Submit">确定</button>
                       <button class="btn btn-primary" type="reset" value="Reset">取消</button>
                   </div>
               </div>

               <div id="ymsrf_" style="display: none">
                   <form class="layui-form" action="">
                       <h4>起点坐标:</h4>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">编号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                               <button class="btn btn-primary btn-mini qdzb">选点坐标</button>
                           </div>
                       </div>
                       <div class="form-group hzzb" id="qdzb">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">横坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">纵坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <h4>终点坐标:</h4>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">编号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                               <button class="btn btn-primary btn-mini zdzb">选点坐标</button>
                           </div>
                       </div>
                       <div class="form-group hzzb" id="zdzb">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">横坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">纵坐标</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <h4>管线属性:</h4>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">管线编号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">起点点号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">终点点号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">起点埋深</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">终点埋深</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">起点高程</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">终点高程</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">材质</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">埋设方式</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">线型</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">管径</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control"><em>毫米</em>
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">建设日期</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">权属单位编号</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">流向</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">所在道路</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group">
                           <div class="layui-input-inline">
                               <label class="layui-form-label">状态</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">类别</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                           <div class="layui-input-inline">
                               <label class="layui-form-label">长度</label>
                               <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                           </div>
                       </div>
                       <div class="form-group" style="text-align: center">
                           <button type="button" class="btn btn-primary">确定</button>
                           <button type="button" class="btn btn-primary">取消</button>
                       </div>
                   </form>
               </div>
           </div>

           <div class="sty" id="crd" style="display: none">
               <p class="sear_sty">
                   <select name="city" class="form-control" lay-verify="required">
                       <option value=""></option>
                       <option value="0">北京</option>
                       <option value="1">上海</option>
                       <option value="2">广州</option>
                       <option value="3">深圳</option>
                       <option value="4">杭州</option>
                   </select>

                   <input type="text"  name="" placeholder="输入名称搜索参照物" autocomplete="off" class="form-control">
                   <button class="btn btn-primary">查询</button>
               </p>
               <form class="layui-form" action="">
                   <h4>管线信息:<button type="button" class="btn btn-primary" style="height: 20px;padding: 0!important">请点击地图中的管线获取信息</button></h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管线编号</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点横坐标</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点纵坐标</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <h4>新增管点信息:</h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管点编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">排水户地面高程</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">特征</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">附属物</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井底埋深</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖类型</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖规格</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井盖材质</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室材质</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室类型</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井脖深</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">井室直径</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">权属单位</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">建设日期</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">偏心井点号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">旋转角度</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">所在道路</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">坐标</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">标高</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group form-btn" style="text-align: center">
                       <button type="button" class="btn btn-primary">确定</button>
                       <button type="button" class="btn btn-primary">取消</button>
                   </div>
               </form>
           </div>

           <div class="sty" id="ljd" style="display: none">
               <p class="sear_sty">
                   <label class="layui-form-label">业务类别</label>
                   <select name="city" class="form-control" lay-verify="required">
                       <option value=""></option>
                       <option value="0">北京</option>
                       <option value="1">上海</option>
                       <option value="2">广州</option>
                       <option value="3">深圳</option>
                       <option value="4">杭州</option>
                   </select>
                   <button class="btn btn-primary">查询</button>
               </p>
               <form class="layui-form" action="">
                   <h4>起点信息:<button type="button" class="btn btn-primary" style="height: 20px;padding: 0!important">请点击地图中的管点获取信息</button></h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管点编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">类型</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">行政区属</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">权属单位</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <h4>终点信息:<button type="button" class="btn btn-primary" style="height: 20px;padding: 0!important">请点击地图中的管点获取信息</button></h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管点编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">类型</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">行政区属</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">权属单位</label>
                           <input type="text" name="title"  required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <h4>管线属性:</h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管线编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点点号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">终点点号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点埋深</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">终点埋深</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">起点高程</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">终点高程</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">材质</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">埋设方式</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">线型</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">管径</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control"><em>毫米</em>
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">建设日期</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">权属单位编号</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">流向</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">所在道路</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">状态</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">类别</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">长度</label>
                           <input type="text" name="title" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div>
               </form>
           </div>
       </div>
    </div>

    <div class="layerTreeDiv">
        <div class="layerControlTitle">图层控制</div>
        <!--<div><span>图层控制</span></div>-->
        <ul id="treeDemo" class=" ztree"></ul>
    </div>
</div>

</body>
</html>
<script>

    //图层收缩事件
    $('.icon-bar').click(function(){
        $('.layerTreeDiv').toggle();
    })
    //解析加线点击事件
    $('.qdzb').click(function (){
        $('#qdzb').toggle();
    })
    $('.zdzb').click(function (){
        $('#zdzb').toggle();
    })

    $('.tabNav li').click(function(){
        var ee = getLonAndLat($("#x1").val(),$("#y1").val(),180,1000);
        $(this).addClass('active_nav').siblings().removeClass('active_nav');
        if($(this).index() == 0){
            $('#czjd').toggle();
            $('#czjd').siblings().hide();
        }else if($(this).index() == 1){
            $('#jxjd').toggle();
            $('#jxjd').siblings().hide();
        }else if($(this).index() == 2){
            $('#jxjx').toggle();
            $('#jxjx').siblings().hide();
        }else if($(this).index() == 3){
            $('#crd').toggle();
            $('#crd').siblings().hide();
        }else if($(this).index() == 4){
            $('#ljd').toggle();
            $('#ljd').siblings().hide();
        }
    })

    //解析加点单选事件
    $('input[name="exampleRadios"]').click(function(){
        if($(this).val() == 1){
            $('#jxf').show();
            $('#ymsrf').hide();
        }else{
            $('#ymsrf').show();
            $('#jxf').hide();
        }
    })

    //解析加线单选事件
    $('input[name="jxjx"]').click(function(){
        if($(this).val() == 1){
            $('#jxf_').show();
            $('#ymsrf_').hide();
        }else{
            $('#ymsrf_').show();
            $('#jxf_').hide();
        }
    })

    //参照物循环增加事件
    var num = 1;
    var zh_;
    $('#add_czw').click(function(){
        let zh = num++;
        zh_ = zh + 1;
        let str = `
<div id="`+zh_+`">
          <h4>参照物`+zh_+`:<button type="button" class="btn btn-primary" style="height: 20px;padding: 0!important" id="`+zh_+`" onclick="getCoordinateFlag(`+zh_+`)">获取坐标</button></h4>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">横坐标</label>
                           <input type="text" name="title" id="x2" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">纵坐标</label>
                           <input type="text" name="title" id="y2" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                       <div class="layui-input-inline">
                           <label class="layui-form-label">距离</label>
                           <input type="text" name="title"  id="dist2" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control jl">
                       </div>
                   </div>
                   <div class="form-group">
                       <div class="layui-input-inline">
                           <label class="layui-form-label">角度</label>
                           <input type="text" name="title" id="brng2" required  lay-verify="required" placeholder="" autocomplete="off" class="form-control">
                       </div>
                   </div></div>
        `
        if(zh_ == 2){
            $('.Mapczw').append(str)
            $('.jl').attr('disabled',true)
        }

    })

    $('#reduce_czw').click(function (){
        $("#"+zh_).remove()
        $('.jl').attr('disabled',false)
        if(num == 1){

        }else{
            zh_ = num--;
        }

    })

    layui.use('laydate', function(){
        var laydate = layui.laydate;
        //执行一个laydate实例
        laydate.render({
            type:'date',
            elem: '#test1' //指定元素
        });
    });

</script>
<script>
    $(() => {
        LoadMap.mapInit(null,{"pidType":"管线更新"});
    })
    $('#search_content').bind('keypress', function (event) {
        if(event.keyCode == "13"){
           search();
        }
    })

    //百度地图道路查询
    function search() {
        $.ajax({
            //url中的参数含义参见百度地图官网webAPI文档
            url: 'http://api.map.baidu.com/place/v2/search?query='+$('#search_content').val()+'&region=北京市&page_size=40&page_num=0&output=json&ak=nSxiPohfziUaCuONe4ViUP2N',
            type: "GET",
            async: false,
            dataType: "jsonp",
            jsonp: "callback",
            jsonpCallback: "callback",
            contentType: "application/json;charset=utf-8",
            success: function (data) {
                console.log(data)
                if (data.status != 0) {
                    alert("搜索失败")
                } else if (data.results.length == 0) {
                    alert("暂无搜索结果")
                } else {
                    var lonlat = data.results[0].location.lng + "," + data.results[0].location.lat;
                    var array_LonLat = lonlat.split(",");
                    for (var i = 0; i < 2; i++) {
                        array_LonLat[i] = Number(array_LonLat[i]);
                    }
                    //搜索出来的经纬度定位到实际地图上有偏差，是因为我使用不是在线服务百度瓦片图，所以这里只能找出偏差度数先减一下
                    var new_lonlat = ol.proj.transform([array_LonLat[0]-0.012653,array_LonLat[1]-0.007422], 'EPSG:4326', 'BD:09')
                    var anchor = new ol.Feature({
                        geometry: new ol.geom.Point(new_lonlat)
                    });
/*
                                            var searchLayer = new ol.layer.Vector({
                                                id: "search",
                                                source:  new ol.source.Vector({
                                                    features: [anchor]
                                                }),
                                                style: olMapStyle.wsc_Style
                                            });
                                            LoadMap.map.addLayer(searchLayer)*/
                    LoadMap.map.getView().setCenter(new_lonlat);
                }
            },
            error: function (data) {
                console.log(data)
            }
        })
    }
    //计算参考选点坐标
    function computeCoordinate() {
        if(num== 1){
            var lonLatObj = getLonAndLat($("#x1").val(),$("#y1").val(),$("#brng1").val(),$("#dis1").val())
            $("#xcor1").attr("value", lonLatObj.lon)
            $("#ycor1").attr("value", lonLatObj.lat)
/*            var new_lonlat = ol.proj.transform([lonLatObj.lon-0.012653,lonLatObj.lat-0.007422], 'EPSG:4326', 'BD:09')
            var anchor = new ol.Feature({
                geometry: new ol.geom.Point(new_lonlat)
            });
            var searchLayer = new ol.layer.Vector({
                id: "555",
                source:  new ol.source.Vector({
                    features: [anchor]
                }),
                style: olMapStyle.wsc_Style
            });*/
            LoadMap.map.addLayer(searchLayer)
        }else{
            //var tt = getIntersection(110.1112,36.61,Math.PI/4,110.1129,36.62,Math.PI/4*3)

            var lonLatObj = getIntersection($("#x1").val(),$("#y1").val(),$("#brng1").val(),$("#x2").val(),$("#y2").val(),$("#brng2").val())
            $("#xcor1").attr("value", lonLatObj.lon)
            $("#ycor1").attr("value", lonLatObj.lat)
            var new_lonlat = ol.proj.transform([lonLatObj.lon-0.012653,lonLatObj.lat-0.007422], 'EPSG:4326', 'BD:09')
            var anchor = new ol.Feature({
                geometry: new ol.geom.Point(new_lonlat)
            });
            var searchLayer = new ol.layer.Vector({
                id: "555",
                source:  new ol.source.Vector({
                    features: [anchor]
                }),
                style: olMapStyle.wsc_Style
            });
            LoadMap.map.addLayer(searchLayer)
        }
    }

    //获取坐标
    function getCoordinateFlag(clicked_id) {
        LoadMap.getCoordinateFlag = clicked_id;
    }

    var mapNumberUtil = {
        rad: function rad(d) {
            return d * Math.PI / 180.0;
        },
        deg: function deg(d) {
            return d * 180/ Math.PI
        }
    };
    /**
     * 根据一个经纬度及距离角度，算出另外一个经纬度
     * @param {*} lon 经度 113.3960698
     * @param {*} lat 纬度 22.941386
     * @param {*} brng 方位角 45 ---- 正北方：000°或360° 正东方：090° 正南方：180° 正西方：270°
     * @param {*} dist 90000距离(米)
     */
    function getLonAndLat (lon, lat, brng, dist) {
        //大地坐标系资料WGS-84 极坐标长半径a=6378137 极坐标短半径b=6356752.3142 扁率f=1/298.2572236
        var a = 6378137;
        var b = 6356752.3142;
        var f = 1 / 298.257223563;
        var lon1 = lon * 1;
        var lat1 = lat * 1;
        var s = dist;
        var alpha1 = mapNumberUtil.rad(brng);
        var sinAlpha1 = Math.sin(alpha1);
        var cosAlpha1 = Math.cos(alpha1);
        var tanU1 = (1 - f) * Math.tan(mapNumberUtil.rad(lat1));
        var cosU1 = 1 / Math.sqrt((1 + tanU1 * tanU1)),
            sinU1 = tanU1 * cosU1;
        var sigma1 = Math.atan2(tanU1, cosAlpha1);
        var sinAlpha = cosU1 * sinAlpha1;
        var cosSqAlpha = 1 - sinAlpha * sinAlpha;
        var uSq = cosSqAlpha * (a * a - b * b) / (b * b);
        var A = 1 + uSq / 16384 * (4096 + uSq * ( - 768 + uSq * (320 - 175 * uSq)));
        var B = uSq / 1024 * (256 + uSq * ( - 128 + uSq * (74 - 47 * uSq)));
        var sigma = s / (b * A),
            sigmaP = 2 * Math.PI;
        while (Math.abs(sigma - sigmaP) > 1e-12) {
            var cos2SigmaM = Math.cos(2 * sigma1 + sigma);
            var sinSigma = Math.sin(sigma);
            var cosSigma = Math.cos(sigma);
            var deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * ( - 1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * ( - 3 + 4 * sinSigma * sinSigma) * ( - 3 + 4 * cos2SigmaM * cos2SigmaM)));
            sigmaP = sigma;
            sigma = s / (b * A) + deltaSigma;
        }
        var tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1;
        var lat2 = Math.atan2(sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1, (1 - f) * Math.sqrt(sinAlpha * sinAlpha + tmp * tmp));
        var lambda = Math.atan2(sinSigma * sinAlpha1, cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1);
        var C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
        var L = lambda - (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * ( - 1 + 2 * cos2SigmaM * cos2SigmaM)));
        var revAz = Math.atan2(sinAlpha, -tmp); // final bearing
        var lonLatObj = {
            lon: lon1 + mapNumberUtil.deg(L),
            lat: mapNumberUtil.deg(lat2)
        }

        return lonLatObj;
    }
    //根据两个点坐标以及与水平方向夹角求交点
    function getIntersection(lon1,lat1,angle1,lon2,lat2,angle2) {
        var lon, lat;
        var rad1 = mapNumberUtil.rad(angle1);
        var rad2 = mapNumberUtil.rad(angle2);
        if (angle1 == angle2 || angle1 + angle2 == 360) {
            return null;
        } else if (angle1 == 90 || angle1 == 270) {
            lon = lon1;
            lat = lat1 + Math.tan(rad2) * (lon1 - lon2)

        } else if (angle2 == 90 || angle2 == 270) {
            lon = lon2;
            lat = lat2 + Math.tan(rad1) * (lon2 - lon1)
        } else {
            lon = (lat2 - lat1 + lon1 * Math.tan(rad1) - lon2 * Math.tan(rad2)) / (Math.tan(rad1) - Math.tan(rad2));
            lat = (Math.tan(rad1) * Math.tan(rad2) * (lon2 - lon1) + Math.tan(rad2) * lat1 - Math.tan(rad1) * lat2) / (Math.tan(rad2) - Math.tan(rad1))
        }

        var lonLatObj = {
            lon: lon,
            lat: lat
        }
        return lonLatObj;
    }
    //参考选点保存
    function save1() {
        var params = {
            objname:"",
            objcode:"",
            bgcode:"",
            street:"",
            community:"",
            geom:""
        };
        var url;
        var options=$("#czjd_type option:selected");
        if(options.text() == "供水"){
            url="/hdsw/gsline/insert"
        }else if(options.text() == "雨水"){
            url="/hdsw/ysline/insert"
        }else if(options.text() == "污水"){
            url="/hdsw/wsline/insert"
        }else if(options.text() == "再生水"){
            url="/hdsw/zssline/insert"
        }

        var json = JSON.stringify(params)
        $.ajax({
            url: url,
            type: "post",
            data: {
                paramJson: json,
            },
            dataType: 'json',
            success: function (data) {

            }
        })
    }
</script>
